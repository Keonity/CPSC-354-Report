<!DOCTYPE html>

<html>
    <head>
        <script src="../static/js/interpreter.js" type="module">
            // interpreter("_$x^2$x$_")
        </script>
        <script src="../node_modules/mathjs/lib/browser/math.js" type="module"></script>
        <script src="../static/js/test2.js" type="module"></script>
        <script src="../static/js/interpreter.js" type="module"></script>
        <title>A Simple Javascript Calculator</title>
    </head>
    <body>
        <h1 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">CPSC-354 PEG.JS Calculator Extension</h1>
        <h3 style="font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Welcome. Please enter a statement you would like parsed. Be sure you follow the grammar below:</h3>
        <label for="statement" style="font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Equation or expression to parse:</label>
        <form id="parsing">
            <!--- <script src="../static/js/interpreter.js" type="module"></script> --->
            <input type="text" id="statement" name="Statement" value="0" onchange="console.log(parseGrammar(document.getElementById('statement').value))"><br><br>
            <!--- <script src="../static/js/interpreter.js" type="module"></script> --->
            <script type="text/javascript"> 
                function callInterpreter() {
                    console.log(parseGrammar(document.getElementById('statement').value))
                }
            </script>
            <button type="button" onclick="callInterpreter()">Call Interpreter</button><br></br>
            <!--- <script>document.getElementById('statement').value</script> --->
            <!--- <button id="parseExp" >Call interpreter.</button> --->
            <label for="output" id="calcOutput" style="font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif">Calculator output:</label>
        </form>
        <h2 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Grammar</h2>
        <ul><h3 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Basic arithmetic: Integer (+, -, *, /, ^) Integer</h3></ul>
        <ul><h3 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Integration of a variable: ~Variable OR ~Variable^Integer</h3></ul>
        <ul><h3 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Integration of a constant: `Constant</h3></ul>
        <ul><h3 style="text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Derivative: _$FunctionToBeDerived$VariableToDeriveFunctionWithRespectTo$_</h3></ul>           
        <!---<form>
            <button onclick="alert('Test')">Call function</button>
        </form>--->
        <!---<script src="../static/js/test.js" type="text/javascript"></script>
        <script src="../static/js/examples.js" type="text/javascript"></script>--->
        <!--- <script type="text/javascript">
            function mainFunction() {
                var parser = require("./test.js")
                const listCommand = (parser.parse("2+2"))
                //console.log(mathjs.integral('x^2', 'x'))
                for (let i = 0; i<listCommand.length-1; i++) {
                    //console.log(listCommand[i])
                    if (listCommand[i] === 'Assign' && i === 0) {
                        console.log(listCommand[1])
                    }
                    else if (listCommand[i] === 'Assign2' && i === 0) {
                        console.log(listCommand[1])
                    }
                    else if (listCommand[i] === 'Derivative' && i === 0) {
                        let functionBefore = String(listCommand[1])
                        let functionLength = functionBefore.length
                        //let functionAfter = functionBefore.substring(1, functionLength)
                        let functionArgs = functionBefore.split("$")
                        //console.log(mathjs.derivative(newAfter))
            
                        //console.log(mathjs.evaluate(functionAfter))
                    }
                    else if (listCommand[i] === 'IntegrateExp' && i === 0) {
                        console.log("Test")
                        alert("Test")
                        //return document.body.innerHTML("<h2>Test</h2>")
                    }
                    else if (listCommand[i] === 'IntegrateVar' && i === 0) {
                        console.log('(' + String(listCommand[i+1]) + ')^2/2')   
                    }
                    else if (listCommand[i] === 'IntegrateInt' && i === 0) {
                        console.log(String(listCommand[i+1][0]) + 'x')
                    }   
                    else if (listCommand[i] === 'Assignment' && i === 0) {
                        varName = String(listCommand[1])
                        varNum = 2
                        let scope = { varName:varNum }
                        console.log(scope)
                    }
                    else {
                        document.write(listCommand)
                    }
                }
        } </script>   --->
    </body>
</html>